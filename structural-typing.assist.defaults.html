<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>structural-typing.assist.defaults documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Structural-typing 2.0.2 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>structural-typing</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>assist</span></div></div></li><li class="depth-3 branch current"><a href="structural-typing.assist.defaults.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>defaults</span></div></a></li><li class="depth-3 branch"><a href="structural-typing.assist.lifting.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lifting</span></div></a></li><li class="depth-3 branch"><a href="structural-typing.assist.oopsie.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oopsie</span></div></a></li><li class="depth-3 branch"><a href="structural-typing.assist.predicate-defining.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>predicate-defining</span></div></a></li><li class="depth-3 branch"><a href="structural-typing.assist.special-words.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>special-words</span></div></a></li><li class="depth-3 branch"><a href="structural-typing.assist.testutil.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>testutil</span></div></a></li><li class="depth-3"><a href="structural-typing.assist.type-repo.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>type-repo</span></div></a></li><li class="depth-2 branch"><a href="structural-typing.doc.html"><div class="inner"><span class="tree" style="top: -238px;"><span class="top" style="height: 247px;"></span><span class="bottom"></span></span><span>doc</span></div></a></li><li class="depth-2 branch"><a href="structural-typing.global-type.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>global-type</span></div></a></li><li class="depth-2 branch"><a href="structural-typing.preds.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>preds</span></div></a></li><li class="depth-2"><a href="structural-typing.type.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>type</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="structural-typing.assist.defaults.html#var-default-error-handler"><div class="inner"><span>default-error-handler</span></div></a></li><li class="depth-1"><a href="structural-typing.assist.defaults.html#var-default-predicate-explainer"><div class="inner"><span>default-predicate-explainer</span></div></a></li><li class="depth-1"><a href="structural-typing.assist.defaults.html#var-default-success-handler"><div class="inner"><span>default-success-handler</span></div></a></li><li class="depth-1"><a href="structural-typing.assist.defaults.html#var-throwing-error-handler"><div class="inner"><span>throwing-error-handler</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">structural-typing.assist.defaults</h2><div class="doc"><div class="markdown"><p>User-visible default behaviors.</p><p>Much of this is gathered into the catchall <code>structural-typing.types</code> namespace.</p></div></div><div class="public anchor" id="var-default-error-handler"><h3>default-error-handler</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>This error handler takes the output of type checking (a sequence of <a href="structural-typing.assist.oopsie.html#var-oopsies">oopsies</a>) and prints each one&rsquo;s explanation to standard output. It returns <code>nil</code>, allowing constructs like this:</p>
<pre><code> (some-&gt; (type/built-like :Patient p)
         (assoc :handled true)
         ...)
</code></pre></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/assist/defaults.clj#L21">view source</a></div></div><div class="public anchor" id="var-default-predicate-explainer"><h3>default-predicate-explainer</h3><div class="usage"><code>(default-predicate-explainer {:keys [predicate-string leaf-value], :as expred})</code></div><div class="doc"><div class="markdown"><p>Converts an <a href="structural-typing.assist.oopsie.html#var-oopsie">oopsie</a> into a string of the form &ldquo;%s should be <code>%s</code>; it is <code>%s</code>&rdquo;.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/assist/defaults.clj#L9">view source</a></div></div><div class="public anchor" id="var-default-success-handler"><h3>default-success-handler</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>The default success handler just returns the original candidate structure passed to <code>built-like</code>.</p></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/assist/defaults.clj#L17">view source</a></div></div><div class="public anchor" id="var-throwing-error-handler"><h3>throwing-error-handler</h3><div class="usage"><code>(throwing-error-handler oopsies)</code></div><div class="doc"><div class="markdown"><p>In contrast to the default error handler, this one throws a <code>java.lang.Exception</code> whose message is the concatenation of the <a href="structural-typing.assist.oopsie.html#var-explanations">explanations</a> of the <a href="structural-typing.assist.oopsie.html#var-oopsies">oopsies</a>.</p><p>To make all type mismatches throw failures, do this:</p>
<pre><code>   (global-type/on-error! type/throwing-error-handler) ; for the global type repo
   (type/replace-error-handler type-repo type/throwing-error-handler) ; local repo
</code></pre></div></div><div class="src-link"><a href="https://github.com/marick/structural-typing/blob/master/src/structural_typing/assist/defaults.clj#L32">view source</a></div></div></div></body></html>